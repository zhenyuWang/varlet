import{S as ee}from"./index.6a608f2c.js";import{d as M,r as i,b as y,T as ne,o as m,l as R,j as C,a as H,G as X,H as oe,Q as se,m as I,t as v,y as ae,x as U,Y as te,c as k,F,k as Y,p as S,n as O,e as w,i as D}from"./vendor.49f89f0d.js";import{j as re,l as le,h as ce,m as ie,c as K,d as z,t as L,v as de,n as ue}from"./components.57927f97.js";import{_ as P}from"./elevation.4d11ec3f.js";import{i as V,c as fe,f as ve,d as pe,e as me,n as he,r as _e}from"./elements.600984cd.js";import{C as ye}from"./index.6fefdd63.js";import{d as Ce}from"./index.079ade67.js";import{u as ke,a as j,_ as be,b as xe,c as ge}from"./en-US.628e0d34.js";import{w as Ie,a as Te}from"./utils.3a4595f4.js";import"./index.d410b4f8.js";const q=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),G=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Be(){const{bindChildren:e,childProviders:r}=re(q),{length:n}=le(G);return{length:n,indexAnchors:r,bindIndexAnchors:e}}function Ne(){const{parentProvider:e,bindParent:r}=ce(q),{index:n}=ie(G);if(!e||!r)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:n,indexBar:e,bindIndexBar:r}}const Ae={index:{type:[Number,String]}};const{n:Ee,classes:$e}=K("index-anchor"),Se=M({name:"VarIndexAnchor",components:{VarSticky:ee},inheritAttrs:!1,props:Ae,setup(e){const{index:r,indexBar:n,bindIndexBar:a}=Ne(),o=i(0),l=i(!1),t=y(()=>e.index),c=i(null),{active:u,sticky:f,cssMode:B,stickyOffsetTop:_,zIndex:b}=n;return a({index:r,name:t,ownTop:o,setOwnTop:()=>{!c.value||(o.value=c.value.$el?c.value.$el.offsetTop:c.value.offsetTop)},setDisabled:x=>{l.value=x}}),{n:Ee,classes:$e,name:t,anchorEl:c,active:u,sticky:f,zIndex:b,disabled:l,cssMode:B,stickyOffsetTop:_,Transition:ne}}});function we(e,r,n,a,o,l){return m(),R(se(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[H("div",oe({class:e.n()},e.$attrs),[X(e.$slots,"default",{},()=>[I(v(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var De=P(Se,[["render",we]]);const ze={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};const{n:Oe,classes:Pe}=K("index-bar"),Le=M({name:"VarIndexBar",props:ze,setup(e){const{length:r,indexAnchors:n,bindIndexAnchors:a}=Be(),o=i(""),l=i(null),t=i(null),c=i([]),u=i(),f=y(()=>e.sticky),B=y(()=>e.cssMode),_=y(()=>e.stickyOffsetTop),b=y(()=>e.zIndex);a({active:u,sticky:f,cssMode:B,stickyOffsetTop:_,zIndex:b});const N=s=>{const d=ue(s)?s.name.value:s;d===u.value||d===void 0||(u.value=d,z(e.onChange,d))},A=()=>{const s=ve(l.value),d=l.value===window?document.body.scrollHeight:l.value.scrollHeight,{offsetTop:E}=t.value;n.forEach((p,h)=>{const $=p.ownTop.value,g=s-$+_.value-E,Z=h===n.length-1?d:n[h+1].ownTop.value-p.ownTop.value;g>=0&&g<Z&&!o.value&&(h&&!e.cssMode&&n[h-1].setDisabled(!0),p.setDisabled(!1),N(p))})},x=async(s,d)=>{const{offsetTop:E}=t.value;if(d&&z(e.onClick,s),s===u.value)return;const p=n.find(({name:g})=>s===g.value);if(!p)return;const h=p.ownTop.value-_.value+E,$=pe(l.value);o.value=s,N(s),await me(l.value,{left:$,top:h,animation:de,duration:L(e.duration)}),he(()=>{o.value=""})},W=s=>{_e(()=>x(s,!0))};return ae(()=>r.value,async()=>{await V(),n.forEach(({name:s,setOwnTop:d})=>{s.value&&c.value.push(s.value),d()})}),U(async()=>{await V(),l.value=fe(t.value),l.value.addEventListener("scroll",A)}),te(()=>{z(l.value.removeEventListener,"scroll",A)}),{n:Oe,classes:Pe,barEl:t,active:u,zIndex:b,anchorNameList:c,toNumber:L,scrollTo:W,anchorClick:x}}}),Ve=["onClick"];function Me(e,r,n,a,o,l){return m(),k("div",{class:S(e.n()),ref:"barEl"},[X(e.$slots,"default"),H("ul",{class:S(e.n("anchor-list")),style:O({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(m(!0),k(F,null,Y(e.anchorNameList,t=>(m(),k("li",{key:t,class:S(e.classes(e.n("anchor-item"),[e.active===t,e.n("anchor-item--active")])),style:O({color:e.active===t&&e.highlightColor?e.highlightColor:""}),onClick:c=>e.anchorClick(t)},v(t),15,Ve))),128))],6)],2)}var T=P(Le,[["render",Me]]);T.install=function(e){e.component(T.name,T)};var Re={title:"\u6807\u9898",text:"\u6587\u672C"},He={title:"Title",text:"Text"};const{add:Q,use:Xe,pack:Ue,packs:sn,merge:an}=ke(),Fe=e=>{ge(e),Xe(e)};j("zh-CN",be);j("en-US",xe);Q("zh-CN",Re);Q("en-US",He);const Ye={name:"IndexBarExample",components:{VarIndexBar:T,VarIndexAnchor:De,VarCell:ye},setup(){const e=i([]),r=i("#e7edf7"),n=i("#2e67ba");U(()=>{for(let o=0;o<26;o++)e.value.push(String.fromCharCode(65+o))});const a=o=>{console.log(o)};return Ie(Fe),Te(Ce,o=>{r.value=o==="darkThemes"?"rgb(41, 42, 45)":"#e7edf7",n.value=o==="darkThemes"?"#3980e8":"#2e67ba"}),{color:n,bgColor:r,list:e,pack:Ue,change:a}}};function Ke(e,r,n,a,o,l){const t=w("var-index-anchor"),c=w("var-cell"),u=w("var-index-bar");return m(),R(u,{onChange:a.change,duration:"300","sticky-offset-top":54},{default:C(()=>[(m(!0),k(F,null,Y(a.list,f=>(m(),k("div",{key:f},[D(t,{index:f,class:"var-index-anchor__example",style:O({background:a.bgColor,color:a.color})},{default:C(()=>[I(v(a.pack.title)+" "+v(f),1)]),_:2},1032,["index","style"]),D(c,null,{default:C(()=>[I(v(f)+" "+v(a.pack.text),1)]),_:2},1024),D(c,null,{default:C(()=>[I(v(f)+" "+v(a.pack.text),1)]),_:2},1024)]))),128))]),_:1},8,["onChange"])}var tn=P(Ye,[["render",Ke]]);export{tn as default};
