import{I as T}from"./index.8a263e15.js";import{F as $,u as F}from"./provide.964d570d.js";import{R as I}from"./index.35433dcf.js";import{c as G,d as Y,b as j,f as W,a as q}from"./components.3670f0ad.js";import{_ as J}from"./elevation.85e837d8.js";import{d as L,r as O,b as E,y as Q,e as p,f as Z,o as S,c as K,a as A,w as ee,p as h,n as ae,G as b,i as C,z as oe}from"./vendor.6bd64832.js";const N=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),z=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function ve(){const{bindChildren:e,childProviders:n}=G(N),{length:s}=Y(z);return{length:s,checkboxes:n,bindCheckboxes:e}}const ne={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};function le(){const{bindParent:e,parentProvider:n}=j(N),{index:s}=W(z);return{index:s,checkboxGroup:n,bindCheckboxGroup:e}}const ce=L({name:"VarCheckbox",directives:{Ripple:I},components:{VarIcon:T,VarFormDetails:$},props:ne,setup(e){const n=O(!1),s=E(()=>n.value===e.checkedValue),y=E(()=>e.checkedValue),u=O(!1),{checkboxGroup:l,bindCheckboxGroup:i}=le(),{form:o,bindForm:d}=F(),{errorMessage:k,validateWithTrigger:D,validate:P,resetValidation:v}=q(),R=a=>{oe(()=>{const{validateTrigger:c,rules:r,modelValue:t}=e;D(c,a,r,t)})},g=a=>{var t;n.value=a;const{checkedValue:c,onChange:r}=e;(t=e["onUpdate:modelValue"])==null||t.call(e,n.value),r==null||r(n.value),R("onChange"),a===c?l==null||l.onChecked(c):l==null||l.onUnchecked(c)},U=a=>{const{disabled:c,readonly:r,checkedValue:t,uncheckedValue:X,onClick:m}=e;if((o==null?void 0:o.disabled.value)||c||(m==null||m(a),(o==null?void 0:o.readonly.value)||r))return;u.value=!0;const x=l?l.checkedCount.value>=Number(l.max.value):!1;!s.value&&x||g(s.value?X:t)},w=a=>{const{checkedValue:c,uncheckedValue:r}=e;n.value=a.includes(c)?c:r},H=()=>{u.value=!1},V=()=>{var a;(a=e["onUpdate:modelValue"])==null||a.call(e,e.uncheckedValue),v()},M=a=>{const{checkedValue:c,uncheckedValue:r}=e;![c,r].includes(a)&&(a=s.value?r:c),g(a)},_=()=>P(e.rules,e.modelValue);Q(()=>e.modelValue,a=>{n.value=a},{immediate:!0});const B={checkedValue:y,checked:s,sync:w,validate:_,resetValidation:v,reset:V,resetWithAnimation:H};return i==null||i(B),d==null||d(B),{withAnimation:u,checked:s,errorMessage:k,checkboxGroupErrorMessage:l==null?void 0:l.errorMessage,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,handleClick:U,toggle:M,reset:V,validate:_,resetValidation:v}}}),re={class:"var-checkbox"};function se(e,n,s,y,u,l){const i=p("var-icon"),o=p("var-form-details"),d=Z("ripple");return S(),K("div",{class:"var-checkbox__wrap",onClick:n[0]||(n[0]=(...k)=>e.handleClick&&e.handleClick(...k))},[A("div",re,[ee((S(),K("div",{class:h(["var-checkbox__action",[e.checked?"var-checkbox--checked":"var-checkbox--unchecked",e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]]),style:ae({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?b(e.$slots,"checked-icon",{key:0},()=>[C(i,{class:h(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):b(e.$slots,"unchecked-icon",{key:1},()=>[C(i,{class:h(["var-checkbox__icon",[e.withAnimation?"var-checkbox--with-animation":null]]),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[d,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),A("div",{class:h(["var-checkbox__text",[e.errorMessage||e.checkboxGroupErrorMessage?"var-checkbox--error":null,e.formDisabled||e.disabled?"var-checkbox--disabled":null]])},[b(e.$slots,"default")],2)]),C(o,{"error-message":e.errorMessage},null,8,["error-message"])])}var f=J(ce,[["render",se]]);f.install=function(e){e.component(f.name,f)};export{f as C,ve as u};
