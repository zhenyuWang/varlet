var Ve=Object.defineProperty,Ue=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var ae=(e,n,d)=>n in e?Ve(e,n,{enumerable:!0,configurable:!0,writable:!0,value:d}):e[n]=d,ue=(e,n)=>{for(var d in n||(n={}))Ae.call(n,d)&&ae(e,d,n[d]);if(oe)for(var d of oe(n))Ne.call(n,d)&&ae(e,d,n[d]);return e},se=(e,n)=>Ue(e,Ie(n));import{A as Pe}from"./AppType.120606bc.js";import{d as me,r as w,b as Y,y as W,o as D,c as z,a as T,p as $,n as G,F as Z,k as re,t as L,h as J,q as x,e as _,i as F,j as q,l as Be,T as Fe,$ as Re,m as O}from"./vendor.49f89f0d.js";import{d as E}from"./index.fa127700.js";import{t as v,c as de,a as le}from"./components.5cba9644.js";import{_ as ee}from"./elevation.4d11ec3f.js";import{d as De}from"./index.079ade67.js";import{u as ze,a as ce,_ as Le,b as Ee,c as je}from"./en-US.628e0d34.js";import{w as qe,a as Oe}from"./utils.3a4595f4.js";const R=["12","1","2","3","4","5","6","7","8","9","10","11"],I=["00","13","14","15","16","17","18","19","20","21","22","23"],ie=["00","05","10","15","20","25","30","35","40","45","50","55"];function Xe(e){return["ampm","24hr"].includes(e)}const Ye={modelValue:{type:String},shadow:{type:Boolean,default:!1},color:{type:String},headerColor:{type:String},format:{type:String,default:"ampm",validator:Xe},allowedTime:{type:Object},min:{type:String},max:{type:String},useSeconds:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},"onUpdate:modelValue":{type:Function},onChange:{type:Function}},fe=(e,n)=>e==="24hr"||n==="am",ne=(e,n,d)=>{const a=R.findIndex(f=>v(f)===v(d)),S=fe(e,n)?d:I[a];return{hourStr:S,hourNum:v(S)}},N=e=>{const[n,d,a]=e.split(":");return{hour:v(n),minute:v(d),second:v(a)}},ve=e=>{var H,A;const{time:n,format:d,ampm:a,hour:S,max:f,min:o,disableHour:s}=e,{hourStr:g,hourNum:P}=ne(d,a,S);let M=!1,V=!1;if(s.includes(g))return!0;if(f&&!o){const{hour:B,minute:t}=N(f);M=B===P&&n>t}if(!f&&o){const{hour:B,minute:t}=N(o);M=B===P&&n<t}if(f&&o){const{hour:B,minute:t}=N(f),{hour:u,minute:i}=N(o);M=u===P&&n<i||B===P&&n>t}return((H=e.allowedTime)==null?void 0:H.minutes)&&(V=(A=e.allowedTime)==null?void 0:A.minutes(n)),M||V},he=e=>{var A,B;const{time:n,format:d,ampm:a,hour:S,minute:f,max:o,min:s,disableHour:g}=e,{hourStr:P,hourNum:M}=ne(d,a,S);let V=!1,H=!1;if(g.includes(P))return!0;if(o&&!s){const{hour:t,minute:u,second:i}=N(o);V=t===M&&u<f||u===f&&n>i}if(!o&&s){const{hour:t,minute:u,second:i}=N(s);V=t===M&&u>f||u===f&&n>i}if(o&&s){const{hour:t,minute:u,second:i}=N(o),{hour:l,minute:y,second:p}=N(s);V=t===M&&u<f||l===M&&y>f||t===M&&u===f&&n>i||l===M&&y===f&&n<p}return((A=e.allowedTime)==null?void 0:A.seconds)&&(H=(B=e.allowedTime)==null?void 0:B.seconds(n)),V||H},{n:We,classes:Ge}=de("time-picker"),Je=me({name:"Clock",props:{isInner:{type:Boolean,required:!0},rad:{type:Number},format:{type:String,default:"ampm"},allowedTime:{type:Object},time:{type:Object,required:!0},useSeconds:{type:Boolean,default:!1},preventNextUpdate:{type:Boolean,default:!1},type:{type:String,default:"hour"},ampm:{type:String,default:"am"},color:{type:String},min:{type:String},max:{type:String}},emits:["update","change-prevent-update"],setup(e,{emit:n}){const d=w(null),a=w([]),S=w([]),f=Y(()=>({transform:`rotate(${v(e.rad)}deg)`,height:e.isInner&&e.type==="hour"?"calc(50% - 40px)":"calc(50% - 4px)",backgroundColor:P(),borderColor:P()})),o=Y(()=>{if(e.rad===void 0)return;const t=e.rad/30;return t>=0?t:t+12}),s=Y(()=>e.type==="hour"?R:ie),g=(t,u)=>{t=t!=null?t:e.type==="minute"?e.time.minute:e.time.second;const i=e.type==="minute"?ve:he,l={time:v(t),format:e.format,ampm:e.ampm,hour:e.time.hour,minute:v(e.time.minute),max:e.max,min:e.min,allowedTime:e.allowedTime,disableHour:a.value};return u&&e.type==="minute"&&Reflect.deleteProperty(l,"minute"),i(l)},P=()=>{if(o.value===void 0)return e.color;const t=e.isInner?I[o.value]:s.value[o.value];return s.value===ie?g()?"#bdbdbd":e.color:V(t)?"#bdbdbd":e.color},M=(t,u)=>u?o.value===t&&e.isInner:o.value===t&&(!e.isInner||e.type!=="hour"),V=t=>{if(e.type==="hour"){if(fe(e.format,e.ampm))return a.value.includes(t);const u=R.findIndex(i=>i===t);return S.value.includes(u)}return g(t,!0)},H=(t,u,i)=>{const l=2*Math.PI/12*t-Math.PI/2,y=50*(1+Math.cos(l)),p=50*(1+Math.sin(l)),h=()=>M(t,i)?V(u)?{backgroundColor:"#bdbdbd",color:"#fff"}:{backgroundColor:e.color,color:void 0}:{backgroundColor:void 0,color:void 0},{backgroundColor:U,color:Q}=h();return{left:`${y}%`,top:`${p}%`,backgroundColor:U,color:Q}},A=()=>{const{width:t,height:u}=d.value.getBoundingClientRect();return{width:t,height:u}},B=()=>o.value===void 0?void 0:(e.ampm==="am"?R:I)[o.value].padStart(2,"0");return W([o,()=>e.isInner],([t,u],[i,l])=>{if(t===i&&u===l||e.type!=="hour"||o.value===void 0)return;const p=u?I[o.value]:B(),h=e.useSeconds?`:${e.time.second}`:"",U=`${p}:${e.time.minute}${h}`;e.preventNextUpdate||n("update",U),n("change-prevent-update")}),W(()=>e.rad,(t,u)=>{if(e.type==="hour"||t===void 0||u===void 0)return;const i=t/6>=0?t/6:t/6+60,l=u/6>=0?u/6:u/6+60;if(i===l)return;let y;const{hourStr:p}=ne(e.format,e.ampm,e.time.hour);if(e.type==="minute"){const h=E().minute(i).format("mm"),U=e.useSeconds?`:${e.time.second}`:"";y=`${p}:${h}${U}`}if(e.type==="second"){const h=E().second(i).format("ss"),U=e.useSeconds?`:${h}`:"";y=`${p}:${e.time.minute}${U}`}n("update",y)}),W([()=>e.max,()=>e.min,()=>e.allowedTime],([t,u,i])=>{if(a.value=[],t&&!u){const{hour:l}=N(t),y=R.filter(h=>v(h)>l),p=I.filter(h=>v(h)>l);a.value=[...y,...p]}if(!t&&u){const{hour:l}=N(u),y=R.filter(h=>v(h)<l),p=I.filter(h=>v(h)<l);a.value=[...y,...p]}if(t&&u){const{hour:l}=N(t),{hour:y}=N(u),p=R.filter(U=>v(U)<y||v(U)>l),h=I.filter(U=>v(U)<y||v(U)>l);a.value=[...p,...h]}if(i==null?void 0:i.hours){const{hours:l}=i,y=R.filter(h=>!l(v(h))),p=I.filter(h=>!l(v(h)));a.value=[...new Set([...a.value,...y,...p])]}S.value=a.value.map(l=>I.findIndex(y=>l===y)).filter(l=>l>=0)},{immediate:!0}),{n:We,classes:Ge,hours24:I,timeScales:s,inner:d,handStyle:f,disableHour:a,isActive:M,isDisable:V,getSize:A,getStyle:H,activeItemIndex:o}}});function Ke(e,n,d,a,S,f){return D(),z("div",{class:$(e.n("clock"))},[T("div",{class:$(e.n("clock-hand")),style:G(e.handStyle)},null,6),(D(!0),z(Z,null,re(e.timeScales,(o,s)=>(D(),z("div",{class:$(e.classes(e.n("clock-item"),[e.isActive(s,!1),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:G(e.getStyle(s,o,!1))},L(o),7))),128)),e.format==="24hr"&&e.type==="hour"?(D(),z("div",{key:0,class:$(e.n("clock-inner")),ref:"inner"},[(D(!0),z(Z,null,re(e.hours24,(o,s)=>(D(),z("div",{class:$(e.classes(e.n("clock-item"),[e.isActive(s,!0),e.n("clock-item--active")],[e.isDisable(o),e.n("clock-item--disable")])),key:o,style:G(e.getStyle(s,o,!0))},L(o),7))),128))],2)):J("v-if",!0)],2)}var Qe=ee(Je,[["render",Ke]]);const{n:Ze,classes:xe}=de("time-picker"),_e=me({name:"VarTimePicker",components:{Clock:Qe},props:Ye,setup(e){const n=w(null),d=w(null),a=w(null),S=w(!1),f=w(!1),o=w(!1),s=w(!1),g=w(!1),P=w(void 0),M=w(0),V=w(0),H=w("hour"),A=w("am"),B=w(!1),t=w(!1),u=w({hour:"00",minute:"00",second:"00"}),i=x({x:0,y:0}),l=x({x:[],y:[]}),y=Y(()=>H.value==="hour"?P.value:H.value==="minute"?M.value:V.value),p=r=>{le(e["onUpdate:modelValue"],r),le(e.onChange,r)},h=r=>r*57.29577951308232,U=r=>{s.value=!1,t.value=!1,H.value=r},Q=r=>{const{disableHour:m}=a.value,c=R.findIndex(k=>v(k)===v(u.value.hour)),b=r==="am"?R:I;return[...b.slice(c),...b.slice(0,c)].find((k,j)=>(f.value=j!==0,!m.includes(k)))},ge=r=>{if(e.readonly)return;A.value=r;const m=Q(r);if(!m)return;const c=e.useSeconds?`:${u.value.second}`:"",b=`${m.padStart(2,"0")}:${u.value.minute}${c}`;p(b)},te=(r,m)=>{const c=r>=l.x[0]&&r<=l.x[1],b=m>=l.y[0]&&m<=l.y[1];return c&&b},be=r=>{const m=e.format==="24hr"?"HH":"hh",{hour:c,minute:b,second:C}=N(r);return{hour:E().hour(c).format(m),minute:E().minute(b).format("mm"),second:E().second(C).format("ss")}},ke=r=>{const m=r/30;return m>=0?m:m+12},Se=()=>{const{width:r,height:m}=a.value.getSize(),c=i.x-r/2-8,b=i.x+r/2+8,C=i.y-m/2-8,k=i.y+m/2+8;return{rangeXMin:c,rangeXMax:b,rangeYMin:C,rangeYMax:k}},He=(r,m,c)=>{const{disableHour:b}=a.value;o.value=te(r,m);const C=Math.round(c/30)*30+90,k=ke(C),j=S.value?R[k]:I[k];if(b.includes(j)||(S.value=e.format==="24hr"?te(r,m):!1),S.value!==o.value)return;const X=S.value||A.value==="pm"?I[k]:R[k];B.value=b.includes(X),!B.value&&(P.value=C,s.value=!0)},pe=r=>{const{disableHour:m}=a.value,c=Math.round(r/6)*6+90,C={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:A.value,hour:u.value.hour,max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};t.value=ve(C),!t.value&&(M.value=c,g.value=!0)},we=r=>{const{disableHour:m}=a.value,c=Math.round(r/6)*6+90,C={time:c/6>=0?c/6:c/6+60,format:e.format,ampm:A.value,hour:u.value.hour,minute:v(u.value.minute),max:e.max,min:e.min,disableHour:m,allowedTime:e.allowedTime};he(C)||(V.value=c)},Me=()=>{const{left:r,top:m,width:c,height:b}=n.value.getBoundingClientRect();if(i.x=r+c/2,i.y=m+b/2,H.value==="hour"&&e.format==="24hr"){const{rangeXMin:C,rangeXMax:k,rangeYMin:j,rangeYMax:X}=Se();l.x=[C,k],l.y=[j,X]}},Ce=r=>{if(r.preventDefault(),e.readonly)return;Me();const{clientX:m,clientY:c}=r.touches[0],b=m-i.x,C=c-i.y,k=Math.round(h(Math.atan2(C,b)));H.value==="hour"?He(m,c,k):H.value==="minute"?pe(k):we(k)},$e=()=>{if(!e.readonly){if(H.value==="hour"&&s.value){H.value="minute";return}H.value==="minute"&&e.useSeconds&&g.value&&(H.value="second")}},Te=()=>{f.value=!1};return W(()=>e.modelValue,r=>{if(r){const{hour:m,minute:c,second:b}=N(r),C=E().hour(m).format("hh"),k=E().hour(m).format("HH"),j=E().minute(c).format("mm"),X=E().second(b).format("ss");P.value=(C==="12"?0:v(C))*30,M.value=v(j)*6,V.value=v(X)*6,u.value=be(r),e.format!=="24hr"&&(A.value=`${m}`.padStart(2,"0")===k&&I.includes(k)?"pm":"am"),S.value=e.format==="24hr"&&I.includes(k)}},{immediate:!0}),{n:Ze,classes:xe,getRad:y,time:u,container:n,inner:a,picker:d,isInner:S,type:H,ampm:A,isPreventNextUpdate:f,moveHand:Ce,checkPanel:U,checkAmpm:ge,end:$e,update:p,changePreventUpdate:Te}}}),en=T("span",null,":",-1),nn={key:0};function tn(e,n,d,a,S,f){const o=_("clock");return D(),z("div",{class:$(e.classes(e.n(),[e.shadow,"var-elevation--2"])),ref:"picker"},[T("div",{class:$(e.n("title")),style:G({background:e.headerColor||e.color})},[T("div",{class:$(e.n("title-time"))},[T("div",{class:$(e.classes(e.n("title-btn"),[e.type==="hour",e.n("title-btn--active")])),onClick:n[0]||(n[0]=s=>e.checkPanel("hour"))},L(e.time.hour),3),en,T("div",{class:$(e.classes(e.n("title-btn"),[e.type==="minute",e.n("title-btn--active")])),onClick:n[1]||(n[1]=s=>e.checkPanel("minute"))},L(e.time.minute),3),e.useSeconds?(D(),z("span",nn,":")):J("v-if",!0),e.useSeconds?(D(),z("div",{key:1,class:$(e.classes(e.n("title-btn"),[e.type==="second",e.n("title-btn--active")])),onClick:n[2]||(n[2]=s=>e.checkPanel("second"))},L(e.time.second),3)):J("v-if",!0)],2),e.format==="ampm"?(D(),z("div",{key:0,class:$(e.n("title-ampm"))},[T("div",{class:$(e.classes(e.n("title-btn"),[e.ampm==="am",e.n("title-btn--active")])),onClick:n[3]||(n[3]=s=>e.checkAmpm("am"))},"AM",2),T("div",{class:$(e.classes(e.n("title-btn"),[e.ampm==="pm",e.n("title-btn--active")])),onClick:n[4]||(n[4]=s=>e.checkAmpm("pm"))},"PM",2)],2)):J("v-if",!0)],6),T("div",{class:$(e.n("body"))},[T("div",{class:$(e.n("clock-container")),onTouchstart:n[5]||(n[5]=(...s)=>e.moveHand&&e.moveHand(...s)),onTouchmove:n[6]||(n[6]=(...s)=>e.moveHand&&e.moveHand(...s)),onTouchend:n[7]||(n[7]=(...s)=>e.end&&e.end(...s)),ref:"container"},[F(Fe,{name:`${e.n()}-panel-fade`},{default:q(()=>[(D(),Be(o,{key:e.type,ref:"inner",type:e.type,ampm:e.ampm,color:e.color,"is-inner":e.isInner,format:e.format,"allowed-time":e.allowedTime,rad:e.getRad,time:e.time,"prevent-next-update":e.isPreventNextUpdate,"use-seconds":e.useSeconds,max:e.max,min:e.min,onUpdate:e.update,onChangePreventUpdate:e.changePreventUpdate},null,8,["type","ampm","color","is-inner","format","allowed-time","rad","time","prevent-next-update","use-seconds","max","min","onUpdate","onChangePreventUpdate"]))]),_:1},8,["name"])],34)],2)],2)}var K=ee(_e,[["render",tn]]);K.install=function(e){e.component(K.name,K)};var on={basicUsage:"\u57FA\u672C\u4F7F\u7528",hour24:"24\u5C0F\u65F6\u683C\u5F0F",readonly:"\u53EA\u8BFB",timeLimit:"\u65F6\u95F4\u9650\u5236",custom:"\u81EA\u5B9A\u4E49",showSecond:"\u663E\u793A\u79D2"},an={basicUsage:"Basic Usage",hour24:"24hr Format",readonly:"Readonly",timeLimit:"Time Limit",custom:"Custom",showSecond:"show-seconds"};const{add:ye,use:un,pack:sn,packs:Hn,merge:pn}=ze(),rn=e=>{je(e),un(e)};ce("zh-CN",Le);ce("en-US",Ee);ye("zh-CN",on);ye("en-US",an);const ln={name:"TimePickerExample",components:{VarTimePicker:K,AppType:Pe},setup(){const e=x({date:"11:20",date1:"15:10",date2:"07:10",date3:"07:10:12",date4:"05:10",date5:"17:36:22"}),n={hours(a){return a%2===0},minutes(a){return a%15!==0},seconds(a){return a%2!==0}},d=a=>{console.log(a)};return qe(rn),Oe(De),se(ue({},Re(e)),{change:d,pack:sn,allowedTime:n})}},mn={style:{"padding-bottom":"20px"}};function dn(e,n,d,a,S,f){const o=_("app-type"),s=_("var-time-picker");return D(),z(Z,null,[T("div",null,[F(o,null,{default:q(()=>[O(L(a.pack.basicUsage),1)]),_:1}),F(s,{modelValue:e.date,"onUpdate:modelValue":n[0]||(n[0]=g=>e.date=g)},null,8,["modelValue"])]),T("div",null,[F(o,null,{default:q(()=>[O(L(a.pack.hour24),1)]),_:1}),F(s,{modelValue:e.date1,"onUpdate:modelValue":n[1]||(n[1]=g=>e.date1=g),format:"24hr",shadow:""},null,8,["modelValue"])]),T("div",null,[F(o,null,{default:q(()=>[O(L(a.pack.showSecond),1)]),_:1}),F(s,{modelValue:e.date5,"onUpdate:modelValue":n[2]||(n[2]=g=>e.date5=g),format:"24hr","use-seconds":""},null,8,["modelValue"])]),T("div",null,[F(o,null,{default:q(()=>[O(L(a.pack.readonly),1)]),_:1}),F(s,{modelValue:e.date2,"onUpdate:modelValue":n[3]||(n[3]=g=>e.date2=g),readonly:"",shadow:""},null,8,["modelValue"])]),T("div",null,[F(o,null,{default:q(()=>[O(L(a.pack.timeLimit),1)]),_:1}),F(s,{modelValue:e.date3,"onUpdate:modelValue":n[4]||(n[4]=g=>e.date3=g),format:"24hr","use-seconds":"",min:"2:28:38",max:"19:40:22","allowed-time":a.allowedTime},null,8,["modelValue","allowed-time"])]),T("div",mn,[F(o,null,{default:q(()=>[O(L(a.pack.custom),1)]),_:1}),F(s,{modelValue:e.date4,"onUpdate:modelValue":n[5]||(n[5]=g=>e.date4=g),shadow:"","header-color":"purple",color:"#7bb872",min:"2:28:38",max:"19:40:22",onChange:a.change},null,8,["modelValue","onChange"])])],64)}var wn=ee(ln,[["render",dn]]);export{wn as default};
