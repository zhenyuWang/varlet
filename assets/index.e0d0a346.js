import{S as J}from"./index.1e638d10.js";import{d as V,r as c,b,T as W,o as h,l as M,j as C,a as R,G as H,H as Z,Q as ee,m as T,t as v,y as ne,x as X,Y as te,c as k,F as U,k as F,p as oe,n as z,e as w,i as D}from"./vendor.49f89f0d.js";import{c as ae,d as se,b as re,f as le}from"./components.721843ff.js";import{_ as O}from"./elevation.ef1405ab.js";import{t as P,h as ie,e as ce}from"./shared.506a394a.js";import{i as L,c as de,f as ue,d as fe,e as ve,n as _e,r as he}from"./elements.92736b4e.js";import{C as me}from"./index.65f7e6e6.js";import{d as pe}from"./index.9b1139e6.js";import{u as ye,a as Y,_ as xe,b as be,c as Ce}from"./en-US.628e0d34.js";import{w as ke,a as ge}from"./utils.3a4595f4.js";import"./index.8b4cefd8.js";const K=Symbol("INDEX_BAR_BIND_INDEX_ANCHOR_KEY"),j=Symbol("INDEX_BAR_COUNT_INDEX_ANCHOR_KEY");function Ie(){const{bindChildren:e,childProviders:r}=ae(K),{length:t}=se(j);return{length:t,indexAnchors:r,bindIndexAnchors:e}}function Te(){const{parentProvider:e,bindParent:r}=re(K),{index:t}=le(j);if(!e||!r)throw Error('[Varlet] IndexAnchor: You should use this component in "IndexBar"');return{index:t,indexBar:e,bindIndexBar:r}}const Be={index:{type:[Number,String]}};const Ne=V({name:"VarIndexAnchor",components:{VarSticky:J},inheritAttrs:!1,props:Be,setup(e){const{index:r,indexBar:t,bindIndexBar:a}=Te(),o=c(0),l=c(!1),s=b(()=>e.index),i=c(null),{active:u,sticky:f,cssMode:N,stickyOffsetTop:y,zIndex:g}=t;return a({index:r,name:s,ownTop:o,setOwnTop:()=>{!i.value||(o.value=i.value.$el?i.value.$el.offsetTop:i.value.offsetTop)},setDisabled:I=>{l.value=I}}),{name:s,anchorEl:i,active:u,sticky:f,zIndex:g,disabled:l,cssMode:N,stickyOffsetTop:y,Transition:W}}});function Ae(e,r,t,a,o,l){return h(),M(ee(e.sticky?"var-sticky":e.Transition),{"offset-top":e.sticky?e.stickyOffsetTop:null,"z-index":e.sticky?e.zIndex:null,disabled:e.disabled&&!e.cssMode,"css-mode":e.cssMode,ref:"anchorEl"},{default:C(()=>[R("div",Z({class:"var-index-anchor"},e.$attrs),[H(e.$slots,"default",{},()=>[T(v(e.name),1)])],16)]),_:3},8,["offset-top","z-index","disabled","css-mode"])}var Ee=O(Ne,[["render",Ae]]);const Se={sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},cssMode:{type:Boolean,default:!1},hideList:{type:Boolean,default:!1},zIndex:{type:[Number,String],default:1},highlightColor:{type:String},duration:{type:[Number,String],default:0},onClick:{type:Function},onChange:{type:Function}};const $e=V({name:"VarIndexBar",props:Se,setup(e){const{length:r,indexAnchors:t,bindIndexAnchors:a}=Ie(),o=c(""),l=c(null),s=c(null),i=c([]),u=c(),f=b(()=>e.sticky),N=b(()=>e.cssMode),y=b(()=>e.stickyOffsetTop),g=b(()=>e.zIndex);a({active:u,sticky:f,cssMode:N,stickyOffsetTop:y,zIndex:g});const A=n=>{var m;const d=ce(n)?n.name.value:n;d===u.value||d===void 0||(u.value=d,(m=e.onChange)==null||m.call(e,d))},E=()=>{const n=ue(l.value),d=l.value===window?document.body.scrollHeight:l.value.scrollHeight,{offsetTop:m}=s.value;t.forEach((_,p)=>{const S=_.ownTop.value,x=n-S+y.value-m,$=p===t.length-1?d:t[p+1].ownTop.value-_.ownTop.value;x>=0&&x<$&&!o.value&&(p&&!e.cssMode&&t[p-1].setDisabled(!0),_.setDisabled(!1),A(_))})},I=async(n,d)=>{var x;const{offsetTop:m}=s.value;if(d&&((x=e.onClick)==null||x.call(e,n)),n===u.value)return;const _=t.find(({name:$})=>n===$.value);if(!_)return;const p=_.ownTop.value-y.value+m,S=fe(l.value);o.value=n,A(n),await ve(l.value,{left:S,top:p,animation:ie,duration:P(e.duration)}),_e(()=>{o.value=""})},Q=n=>{he(()=>I(n,!0))};return ne(()=>r.value,async()=>{await L(),t.forEach(({name:n,setOwnTop:d})=>{n.value&&i.value.push(n.value),d()})}),X(async()=>{await L(),l.value=de(s.value),l.value.addEventListener("scroll",E)}),te(()=>{var n;(n=l.value)==null||n.removeEventListener("scroll",E)}),{barEl:s,active:u,zIndex:g,anchorNameList:i,toNumber:P,scrollTo:Q,anchorClick:I}}}),we={class:"var-index-bar",ref:"barEl"},De=["onClick"];function ze(e,r,t,a,o,l){return h(),k("div",we,[H(e.$slots,"default"),R("ul",{class:"var-index-bar__anchor-list",style:z({zIndex:e.toNumber(e.zIndex)+2,display:e.hideList?"none":"block"})},[(h(!0),k(U,null,F(e.anchorNameList,s=>(h(),k("li",{key:s,class:oe(["var-index-bar__anchor-item",{"var-index-bar__anchor-item--active":e.active===s}]),style:z({color:e.active===s&&e.highlightColor?e.highlightColor:""}),onClick:i=>e.anchorClick(s)},v(s),15,De))),128))],4)],512)}var B=O($e,[["render",ze]]);B.install=function(e){e.component(B.name,B)};var Oe={title:"\u6807\u9898",text:"\u6587\u672C"},Pe={title:"Title",text:"Text"};const{add:q,use:Le,pack:Ve,packs:Ze,merge:en}=ye(),Me=e=>{Ce(e),Le(e)};Y("zh-CN",xe);Y("en-US",be);q("zh-CN",Oe);q("en-US",Pe);const Re={name:"IndexBarExample",components:{VarIndexBar:B,VarIndexAnchor:Ee,VarCell:me},setup(){const e=c([]),r=c("#e7edf7"),t=c("#2e67ba");X(()=>{for(let o=0;o<26;o++)e.value.push(String.fromCharCode(65+o))});const a=o=>{console.log(o)};return ke(Me),ge(pe,o=>{r.value=o==="darkThemes"?"rgb(41, 42, 45)":"#e7edf7",t.value=o==="darkThemes"?"#3980e8":"#2e67ba"}),{color:t,bgColor:r,list:e,pack:Ve,change:a}}};function He(e,r,t,a,o,l){const s=w("var-index-anchor"),i=w("var-cell"),u=w("var-index-bar");return h(),M(u,{onChange:a.change,duration:"300","sticky-offset-top":54},{default:C(()=>[(h(!0),k(U,null,F(a.list,f=>(h(),k("div",{key:f},[D(s,{index:f,class:"var-index-anchor__example",style:z({background:a.bgColor,color:a.color})},{default:C(()=>[T(v(a.pack.title)+" "+v(f),1)]),_:2},1032,["index","style"]),D(i,null,{default:C(()=>[T(v(f)+" "+v(a.pack.text),1)]),_:2},1024),D(i,null,{default:C(()=>[T(v(f)+" "+v(a.pack.text),1)]),_:2},1024)]))),128))]),_:1},8,["onChange"])}var nn=O(Re,[["render",He]]);export{nn as default};
