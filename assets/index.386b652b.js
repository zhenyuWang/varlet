import{I as w}from"./index.8b4cefd8.js";import{F as $,u as M}from"./provide.aed138f2.js";import{R as T}from"./index.f8492b74.js";import{a as W}from"./components.721843ff.js";import{t as f}from"./elements.92736b4e.js";import{t as c}from"./shared.506a394a.js";import{_ as A}from"./elevation.ef1405ab.js";import{d as E,z as L,e as N,f as P,o as v,c as h,a as X,F as j,k as q,w as G,n as R,p as H,i as k}from"./vendor.49f89f0d.js";const J={modelValue:{type:[String,Number],default:0},count:{type:[String,Number],default:5},color:{type:String},icon:{type:String,default:"star"},emptyColor:{type:String},emptyIcon:{type:String,default:"star-outline"},size:{type:[String,Number],default:"24"},gap:{type:[String,Number],default:"2"},namespace:{type:String},half:{type:Boolean,default:!1},halfIcon:{type:String,default:"star-half-full"},disabled:{type:Boolean,default:!1},disabledColor:{type:String},readonly:{type:Boolean,default:!1},ripple:{type:Boolean,default:!0},rules:{type:Array},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const K=E({name:"VarRate",components:{VarIcon:w,VarFormDetails:$},directives:{Ripple:T},props:J,setup(e){const{form:t,bindForm:u}=M(),{errorMessage:y,validateWithTrigger:_,validate:S,resetValidation:i}=W(),p=a=>{const{count:o,size:r,gap:l}=e;return{color:d(a).color,marginRight:a!==c(o)?f(l):0,width:f(r),height:f(r),borderRadius:"50%"}},g=a=>{const{type:o,color:r}=d(a);return{"var-rate__content":!0,"var-rate--disabled":t==null?void 0:t.disabled.value,"var-rate--error":y.value,"var-rate--primary":o!=="empty"&&!r}},s=a=>{const{type:o}=d(a),{icon:r,halfIcon:l,emptyIcon:n}=e;return o==="full"?r:o==="half"?l:n},d=a=>{const{modelValue:o,disabled:r,disabledColor:l,color:n,half:D,emptyColor:U}=e;let m;return r||(t==null?void 0:t.disabled.value)?m=l:n&&(m=n),a<=c(o)?{type:"full",score:a,color:m}:D&&a<=c(o)+.5?{type:"half",score:a,color:m}:{type:"empty",score:a,color:r||(t==null?void 0:t.disabled.value)?l:U}},z=(a,o)=>{var r;if(e.half){const{offsetWidth:l}=o.target;o.offsetX<=Math.floor(l/2)&&(a-=.5)}(r=e["onUpdate:modelValue"])==null||r.call(e,a)},C=()=>S(e.rules,c(e.modelValue)),I=()=>L(()=>_(["onChange"],"onChange",e.rules,e.modelValue)),B=(a,o)=>{const{readonly:r,disabled:l,onChange:n}=e;r||l||(t==null?void 0:t.disabled.value)||(t==null?void 0:t.readonly.value)||(z(a,o),n==null||n(a),I())},V=()=>{var a;(a=e["onUpdate:modelValue"])==null||a.call(e,0),i()},F={reset:V,validate:C,resetValidation:i};return u==null||u(F),{errorMessage:y,formDisabled:t==null?void 0:t.disabled,formReadonly:t==null?void 0:t.readonly,getStyle:p,getClass:g,getIconName:s,handleClick:B,reset:V,validate:C,resetValidation:i,toSizeUnit:f,toNumber:c}}}),O={class:"var-rate__warp"},Q={class:"var-rate"},Y=["onClick"];function Z(e,t,u,y,_,S){const i=N("var-icon"),p=N("var-form-details"),g=P("ripple");return v(),h("div",O,[X("div",Q,[(v(!0),h(j,null,q(e.toNumber(e.count),s=>G((v(),h("div",{key:s,style:R(e.getStyle(s)),class:H(e.getClass(s)),onClick:d=>e.handleClick(s,d)},[k(i,{transition:0,namespace:e.namespace,name:e.getIconName(s),style:R({fontSize:e.toSizeUnit(e.size)})},null,8,["namespace","name","style"])],14,Y)),[[g,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]])),128))]),k(p,{"error-message":e.errorMessage},null,8,["error-message"])])}var b=A(K,[["render",Z]]);b.install=function(e){e.component(b.name,b)};export{b as R};
