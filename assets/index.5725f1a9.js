var K=Object.defineProperty;var E=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var T=(e,n,t)=>n in e?K(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,c=(e,n)=>{for(var t in n||(n={}))Y.call(n,t)&&T(e,t,n[t]);if(E)for(var t of E(n))H.call(n,t)&&T(e,t,n[t]);return e};import{d as P,r as R,b as I,y as _,x as J,e as h,w as Z,v as Q,o as v,c as W,a as k,p as m,G as g,l as w,h as z,n as N,m as q,t as F,i as b,j as S,H as C,T as X,I as x,q as $,J as ee,K as ne}from"./vendor.49f89f0d.js";import{p as V,L as te}from"./index.fa8800b2.js";import{I as oe}from"./index.6428d33d.js";import{u as ae}from"./zIndex.8c13fd4c.js";import{p as L,c as U,u as ie,r as se,n as re,g as le,i as ce,t as j}from"./components.57927f97.js";import{_ as G}from"./elevation.229458c1.js";import{c as de}from"./index.48ee5316.js";import{u as ue}from"./lock.c5636ec8.js";function fe(e){return["top","center","bottom"].includes(e)}function pe(e){return A.includes(e)}const D={type:{type:String,validator:pe},position:{type:String,default:"top",validator:fe},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:L(V,"type"),loadingSize:L(V,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const{n:me,classes:ve}=U("snackbar"),ye={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ge=P({name:"VarSnackbarCore",components:{VarLoading:te,VarIcon:oe},props:D,setup(e){const n=R(null),{zIndex:t}=ae(()=>e.show,1);ue(e,"show","lockScroll");const o=I(()=>e.type==="loading"||e.forbidClick),s=I(()=>e.type?ye[e.type]:""),i=()=>{n.value=setTimeout(()=>{var a;e.type!=="loading"&&((a=e["onUpdate:show"])==null||a.call(e,!1))},e.duration)};return _(()=>e.show,a=>{var l,p;a?((l=e.onOpen)==null||l.call(e),i()):a===!1&&(clearTimeout(n.value),(p=e.onClose)==null||p.call(e))}),_(()=>e._update,()=>{clearTimeout(n.value),i()}),J(()=>{var a;e.show&&((a=e.onOpen)==null||a.call(e),i())}),{SNACKBAR_TYPE:A,n:me,classes:ve,zIndex:t,iconName:s,isForbidClick:o}}});function be(e,n,t,o,s,i){const a=h("var-icon"),l=h("var-loading");return Z((v(),W("div",{class:m(e.n()),style:N({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[k("div",{class:m(e.classes(e.n("wrapper"),e.n(`wrapper-${e.position}`),"var-elevation--4",[e.vertical,e.n("vertical")],[e.type&&e.SNACKBAR_TYPE.includes(e.type),e.n(`wrapper-${e.type}`)])),style:N({zIndex:e.zIndex})},[k("div",{class:m([e.n("content"),e.contentClass])},[g(e.$slots,"default",{},()=>[q(F(e.content),1)])],2),k("div",{class:m(e.n("action"))},[e.iconName?(v(),w(a,{key:0,name:e.iconName},null,8,["name"])):z("v-if",!0),e.type==="loading"?(v(),w(l,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):z("v-if",!0),g(e.$slots,"action")],2)],6)],6)),[[Q,e.show]])}var M=G(ge,[["render",be]]);const{n:ke}=U("snackbar"),Se=P({name:"VarSnackbar",components:{VarSnackbarCore:M},props:D,setup(){const{disabled:e}=ie();return{n:ke,disabled:e}}});function he(e,n,t,o,s,i){const a=h("var-snackbar-core");return v(),w(x,{to:e.teleport,disabled:e.disabled},[b(X,{name:`${e.n()}-fade`,onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:S(()=>[b(a,C(e.$props,{class:"var-snackbar__transition"}),{action:S(()=>[g(e.$slots,"action")]),default:S(()=>[g(e.$slots,"default",{},()=>[q(F(e.content),1)])]),_:3},16)]),_:3},8,["name","onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var d=G(Se,[["render",he]]);function we(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ee(e)}const A=["loading","success","warning","info","error"];let B=0,O=!1,y,u=!1,r=$([]);const Ce={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},Oe={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},$e={setup(){return()=>{const e=r.map(({id:t,reactiveSnackOptions:o,_update:s})=>{const i=document.querySelector(".var-transition-group");o.forbidClick||o.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),u&&(o.position="top");const l=c({position:u?"relative":"absolute"},_e(o.position));return b(M,C(o,{key:t,style:l,"data-id":t,_update:s,show:o.show,"onUpdate:show":p=>o.show=p}),null)}),n=de.zIndex;return b(ne,C(Oe,{style:{zIndex:n},onAfterEnter:Ae,onAfterLeave:Ee}),we(e)?e:{default:()=>[e]})}}},f=function(e){const n=le(e)||ce(e)?{content:String(e)}:e,t=$(c(c({},Ce),n));t.show=!0,O||(O=!0,y=se($e).unmountInstance);const{length:o}=r,s={id:B++,reactiveSnackOptions:t};if(o===0||u)Te(s);else{const i=`update-${B}`;Ie(t,i)}return{clear(){!u&&r.length?r[0].reactiveSnackOptions.show=!1:t.show=!1}}};A.forEach(e=>{f[e]=n=>(re(n)?n.type=e:n={content:n,type:e},f(n))});f.install=function(e){e.component(d.name,d)};f.allowMultiple=function(e=!1){e!==u&&(r.forEach(n=>{n.reactiveSnackOptions.show=!1}),u=e)};f.clear=function(){r.forEach(e=>{e.reactiveSnackOptions.show=!1})};f.Component=d;function Ae(e){var o,s;const n=e.getAttribute("data-id"),t=r.find(i=>i.id===j(n));t&&((s=(o=t.reactiveSnackOptions).onOpened)==null||s.call(o))}function Ee(e){var s,i;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),t=r.find(a=>a.id===j(n));t&&(t.animationEnd=!0,(i=(s=t.reactiveSnackOptions).onClosed)==null||i.call(s)),r.every(a=>a.animationEnd)&&(y==null||y(),r=$([]),O=!1)}function Te(e){r.push(e)}function Ie(e,n){const[t]=r;t.reactiveSnackOptions=c(c({},t.reactiveSnackOptions),e),t._update=n}function _e(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}d.install=function(e){e.component(d.name,d)};export{f as S};
