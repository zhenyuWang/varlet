import{d as C,r as i,b as T,y as d,x as k,C as L,i as r,I as E,T as F,w as I,v as M,J as N,z as O}from"./vendor.efca09d3.js";import{g as w,a as U,t as g}from"./elements.6395be39.js";import{u as _}from"./zIndex.2548bfbd.js";import{u as $,e as A}from"./components.8013e964.js";import"./index.b50b8baf.js";function V(e){return["top","bottom"].includes(e)}const X={show:{type:Boolean,default:!1},alignment:{type:String,default:"top",validator:V},offsetX:{type:[Number,String],default:0},offsetY:{type:[Number,String],default:0},teleport:{type:String,default:"body"},onOpen:{type:Function},onOpened:{type:Function},onClose:{type:Function},onClosed:{type:Function},"onUpdate:show":{type:Function}};function Y(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!N(e)}var f=C({name:"VarMenu",props:X,setup(e,{slots:a}){const l=i(null),v=i(null),u=i(),m=i(0),y=i(0),{zIndex:h}=_(()=>e.show,1),{disabled:x}=$();let c=!1;const S=t=>t==="top"?w(l.value):w(l.value)-v.value.offsetHeight,j=()=>{c=!0},b=()=>{var t;if(c){c=!1;return}!e.show||(t=e["onUpdate:show"])==null||t.call(e,!1)},o=()=>{m.value=S(e.alignment),y.value=U(l.value)},z=T(()=>({top:`calc(${m.value}px + ${g(e.offsetY)})`,left:`calc(${y.value}px + ${g(e.offsetX)})`,zIndex:h.value})),p=()=>r(F,{name:"var-menu",onAfterEnter:e.onOpen,onAfterLeave:e.onClosed},{default:()=>{var t;return[I(r("div",{class:"var-menu__menu var-elevation--3",ref:v,style:z.value,onClick:n=>{n.stopPropagation()}},[(t=a.menu)==null?void 0:t.call(a)]),[[M,e.show]])]}});return d(()=>e.alignment,o),d(()=>e.show,async t=>{const{onOpen:n,onClose:s}=e;t&&(await O(),o()),t?n==null||n():s==null||s()}),d(()=>e.teleport,t=>{u.value=t}),k(()=>{u.value=e.teleport,o(),document.addEventListener("click",b),window.addEventListener("resize",o)}),L(()=>{document.removeEventListener("click",b),window.removeEventListener("resize",o)}),A({resize:o}),()=>{var n;let t;return r("div",{class:"var-menu",ref:l,onClick:j},[(n=a.default)==null?void 0:n.call(a),u.value?r(E,{to:u.value,disabled:x.value},Y(t=p())?t:{default:()=>[t]}):p()])}}});f.install=function(e){e.component(f.name,f)};export{f as M};
