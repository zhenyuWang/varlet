var x=Object.defineProperty,D=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,E=(e,t)=>{for(var o in t||(t={}))z.call(t,o)&&B(e,o,t[o]);if(U)for(var o of U(t))$.call(t,o)&&B(e,o,t[o]);return e},N=(e,t)=>D(e,R(t));import{L as M}from"./index.6262ef7e.js";import{R as P}from"./index.35433dcf.js";import{c as Q,b as j}from"./elements.92736b4e.js";import{f as q,i as G}from"./shared.506a394a.js";import{p as H,u as O,a as w,_ as Z,b as J,c as K}from"./en-US.aa18f95c.js";import{_ as A}from"./elevation.85e837d8.js";import{d as W,r as V,x as X,C as Y,z as ee,e as c,f as te,o as f,c as p,G as h,h as y,a as T,t as s,i as l,w as ae,m as g,q as ie,a0 as oe,j as n,F as k,k as C,l as F}from"./vendor.6bd64832.js";import{C as ne}from"./index.c8060105.js";import{T as re,a as le}from"./index.823d0d28.js";import{T as se}from"./index.48fb68cf.js";import{T as de}from"./index.6c8e009a.js";import{d as ue}from"./index.9b1139e6.js";import{w as fe,a as me}from"./utils.342a5a4f.js";import"./index.43e98689.js";import"./index.8a263e15.js";import"./index.2ad4ff1a.js";import"./components.3670f0ad.js";import"./index.7c99da8f.js";import"./provide.f2ce44a6.js";import"./provide.b2bd7a6b.js";import"./index.048330e9.js";const ce={loading:{type:Boolean,default:!1},immediateCheck:{type:Boolean,default:!0},finished:{type:Boolean,default:!1},error:{type:Boolean,default:!1},offset:{type:[String,Number],default:0},loadingText:{type:String},finishedText:{type:String},errorText:{type:String},onLoad:{type:Function},"onUpdate:loading":{type:Function},"onUpdate:error":{type:Function}};const ge=W({name:"VarList",directives:{Ripple:P},components:{VarLoading:M},props:ce,setup(e){const t=V(null),o=V(null);let i;const v=()=>{var u,r,m;(u=e["onUpdate:error"])==null||u.call(e,!1),(r=e["onUpdate:loading"])==null||r.call(e,!0),(m=e.onLoad)==null||m.call(e)},b=()=>{const u=i===window?window.innerHeight:i.getBoundingClientRect().bottom,{bottom:r}=o.value.getBoundingClientRect();return Math.floor(r)-j(e.offset)<=u},d=async()=>{await ee();const{loading:u,finished:r,error:m}=e;!u&&!r&&!m&&b()&&v()};return X(()=>{i=Q(t.value),e.immediateCheck&&d(),i.addEventListener("scroll",d)}),Y(()=>{i.removeEventListener("scroll",d)}),{pack:H,listEl:t,detectorEl:o,dt:q,isNumber:G,load:v,check:d}}}),pe={class:"var-list var--box",ref:"listEl"},ve={class:"var-list__loading"},he={class:"var-list__loading-text"},Te={class:"var-list__finished"},ke={class:"var-list__detector",ref:"detectorEl"};function _e(e,t,o,i,v,b){const d=c("var-loading"),u=te("ripple");return f(),p("div",pe,[h(e.$slots,"default"),e.loading?h(e.$slots,"loading",{key:0},()=>[T("div",ve,[T("div",he,s(e.dt(e.loadingText,e.pack.listLoadingText)),1),l(d,{size:"mini",radius:10})])]):y("v-if",!0),e.finished?h(e.$slots,"finished",{key:1},()=>[T("div",Te,s(e.dt(e.finishedText,e.pack.listFinishedText)),1)]):y("v-if",!0),e.error?h(e.$slots,"error",{key:2},()=>[ae((f(),p("div",{class:"var-list__error",onClick:t[0]||(t[0]=(...r)=>e.load&&e.load(...r))},[g(s(e.dt(e.errorText,e.pack.listErrorText)),1)])),[[u]])]):y("v-if",!0),T("div",ke,null,512)],512)}var _=A(ge,[["render",_e]]);_.install=function(e){e.component(_.name,_)};var be={basicUsage:"\u57FA\u672C\u4F7F\u7528",loadFail:"\u52A0\u8F7D\u5931\u8D25",tipText:"\u63D0\u793A\u6587\u5B57",loadingText:"\u6B63\u5728\u52AA\u529B\u8F93\u51FA",errorText:"\u51FA\u9519\u4E86\u51FA\u9519\u4E86",finishedText:"\u4E00\u6EF4\u90FD\u6CA1\u6709\u4E86",listItem:"\u5217\u8868\u9879"},Le={basicUsage:"Basic Usage",loadFail:"Load Fail",tipText:"Tip Text",loadingText:"loading QAQ",errorText:"error TNT",finishedText:"finished ORZ",listItem:"List Item"};const{add:I,use:ye,pack:Ce,packs:Ke,merge:We}=O(),Fe=e=>{K(e),ye(e)};w("zh-CN",Z);w("en-US",J);I("zh-CN",be);I("en-US",Le);const Ue={name:"ListExample",components:{VarList:_,VarCell:ne,VarTabs:re,VarTab:le,VarTabsItems:se,VarTabItem:de},setup(){const e=ie({loading:!1,loading2:!1,loading3:!1,finished:!1,finished2:!1,finished3:!1,error:!1,list:[],list2:[],list3:[],current:0});return fe(Fe),me(ue),N(E({pack:Ce},oe(e)),{load(){if(e.current!==0){e.loading=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)e.list.push(e.list.length+1);e.loading=!1,e.list.length>=60&&(e.finished=!0)},1e3)},load2(){if(e.current!==1){e.loading2=!1;return}setTimeout(()=>{if(e.list2.length===40){e.error=!0,e.loading2=!1;return}for(let t=0;t<20;t++)e.list2.push(e.list2.length+1);e.loading2=!1},1e3)},load3(){if(e.current!==2){e.loading3=!1;return}setTimeout(()=>{for(let t=0;t<20;t++)e.list3.push(e.list3.length+1);e.loading3=!1,e.list3.length>=60&&(e.finished3=!0)},1e3)}})}};function Be(e,t,o,i,v,b){const d=c("var-tab"),u=c("var-tabs"),r=c("var-cell"),m=c("var-list"),L=c("var-tab-item"),S=c("var-tabs-items");return f(),p(k,null,[l(u,{active:e.current,"onUpdate:active":t[0]||(t[0]=a=>e.current=a),sticky:"","offset-top":"54px",style:{"margin-bottom":"10px"}},{default:n(()=>[l(d,null,{default:n(()=>[g(s(i.pack.basicUsage),1)]),_:1}),l(d,null,{default:n(()=>[g(s(i.pack.loadFail),1)]),_:1}),l(d,null,{default:n(()=>[g(s(i.pack.tipText),1)]),_:1})]),_:1},8,["active"]),l(S,{active:e.current,"onUpdate:active":t[5]||(t[5]=a=>e.current=a)},{default:n(()=>[l(L,null,{default:n(()=>[l(m,{finished:e.finished,loading:e.loading,"onUpdate:loading":t[1]||(t[1]=a=>e.loading=a),onLoad:i.load},{default:n(()=>[(f(!0),p(k,null,C(e.list,a=>(f(),F(r,{key:a},{default:n(()=>[g(s(i.pack.listItem)+": "+s(a),1)]),_:2},1024))),128))]),_:1},8,["finished","loading","onLoad"])]),_:1}),l(L,null,{default:n(()=>[l(m,{finished:e.finished2,error:e.error,"onUpdate:error":t[2]||(t[2]=a=>e.error=a),loading:e.loading2,"onUpdate:loading":t[3]||(t[3]=a=>e.loading2=a),onLoad:i.load2},{default:n(()=>[(f(!0),p(k,null,C(e.list2,a=>(f(),F(r,{key:a},{default:n(()=>[g(s(i.pack.listItem)+": "+s(a),1)]),_:2},1024))),128))]),_:1},8,["finished","error","loading","onLoad"])]),_:1}),l(L,null,{default:n(()=>[l(m,{"loading-text":i.pack.loadingText,"finished-text":i.pack.finishedText,"error-text":i.pack.errorText,finished:e.finished3,loading:e.loading3,"onUpdate:loading":t[4]||(t[4]=a=>e.loading3=a),onLoad:i.load3},{default:n(()=>[(f(!0),p(k,null,C(e.list3,a=>(f(),F(r,{key:a},{default:n(()=>[g(s(i.pack.listItem)+": "+s(a),1)]),_:2},1024))),128))]),_:1},8,["loading-text","finished-text","error-text","finished","loading","onLoad"])]),_:1})]),_:1},8,["active"])],64)}var Xe=A(Ue,[["render",Be]]);export{Xe as default};
