import{I as $}from"./index.e30cf35b.js";import{F as I,u as j}from"./provide.538f2bd7.js";import{R as Y}from"./index.c3ac679f.js";import{j as W,l as q,h as J,m as L,d as Q,a as c,c as Z}from"./components.5cba9644.js";import{_}from"./elevation.4d11ec3f.js";import{d as x,r as O,b as E,y as ee,e as S,f as ae,o as K,c as N,a as A,w as ne,p as d,n as oe,G as C,i as b,z as se}from"./vendor.49f89f0d.js";const z=Symbol("CHECKBOX_GROUP_BIND_CHECKBOX_KEY"),D=Symbol("CHECKBOX_GROUP_COUNT_CHECKBOX_KEY");function be(){const{bindChildren:e,childProviders:o}=W(z),{length:r}=q(D);return{length:r,checkboxes:o,bindCheckboxes:e}}const le={modelValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedValue:{type:[String,Number,Boolean,Object,Array],default:!0},uncheckedValue:{type:[String,Number,Boolean,Object,Array],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconSize:{type:[String,Number]},ripple:{type:Boolean,default:!0},validateTrigger:{type:Array,default:["onChange"]},rules:{type:Array},onClick:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};function re(){const{bindParent:e,parentProvider:o}=J(z),{index:r}=L(D);return{index:r,checkboxGroup:o,bindCheckboxGroup:e}}const{n:ie,classes:ce}=Z("checkbox"),de=x({name:"VarCheckbox",directives:{Ripple:Y},components:{VarIcon:$,VarFormDetails:I},props:le,setup(e){const o=O(!1),r=E(()=>o.value===e.checkedValue),y=E(()=>e.checkedValue),t=O(!1),{checkboxGroup:s,bindCheckboxGroup:u}=re(),{form:a,bindForm:m}=j(),{errorMessage:k,validateWithTrigger:P,validate:R,resetValidation:v}=Q(),U=n=>{se(()=>{const{validateTrigger:l,rules:i,modelValue:h}=e;P(l,n,i,h)})},p=n=>{o.value=n;const{checkedValue:l,onChange:i}=e;c(e["onUpdate:modelValue"],o.value),c(i,o.value),U("onChange"),n===l?s==null||s.onChecked(l):s==null||s.onUnchecked(l)},w=n=>{const{disabled:l,readonly:i,checkedValue:h,uncheckedValue:X,onClick:G}=e;if((a==null?void 0:a.disabled.value)||l||(c(G,n),(a==null?void 0:a.readonly.value)||i))return;t.value=!0;const T=s?s.checkedCount.value>=Number(s.max.value):!1;!r.value&&T||p(r.value?X:h)},F=n=>{const{checkedValue:l,uncheckedValue:i}=e;o.value=n.includes(l)?l:i},H=()=>{t.value=!1},g=()=>{c(e["onUpdate:modelValue"],e.uncheckedValue),v()},M=n=>{const{checkedValue:l,uncheckedValue:i}=e;![l,i].includes(n)&&(n=r.value?i:l),p(n)},V=()=>R(e.rules,e.modelValue);ee(()=>e.modelValue,n=>{o.value=n},{immediate:!0});const B={checkedValue:y,checked:r,sync:F,validate:V,resetValidation:v,reset:g,resetWithAnimation:H};return c(u,B),c(m,B),{withAnimation:t,checked:r,errorMessage:k,checkboxGroupErrorMessage:s==null?void 0:s.errorMessage,formDisabled:a==null?void 0:a.disabled,formReadonly:a==null?void 0:a.readonly,n:ie,classes:ce,handleClick:w,toggle:M,reset:g,validate:V,resetValidation:v}}});function te(e,o,r,y,t,s){const u=S("var-icon"),a=S("var-form-details"),m=ae("ripple");return K(),N("div",{class:d(e.n("wrap")),onClick:o[0]||(o[0]=(...k)=>e.handleClick&&e.handleClick(...k))},[A("div",{class:d(e.n())},[ne((K(),N("div",{class:d(e.classes(e.n("action"),[e.checked,e.n("--checked"),e.n("--unchecked")],[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:oe({color:e.checked?e.checkedColor:e.uncheckedColor})},[e.checked?C(e.$slots,"checked-icon",{key:0},()=>[b(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-marked",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])]):C(e.$slots,"unchecked-icon",{key:1},()=>[b(u,{class:d(e.classes(e.n("icon"),[e.withAnimation,e.n("--with-animation")])),name:"checkbox-blank-outline",size:e.iconSize,"var-checkbox-cover":""},null,8,["class","size"])])],6)),[[m,{disabled:e.formReadonly||e.readonly||e.formDisabled||e.disabled||!e.ripple}]]),A("div",{class:d(e.classes(e.n("text"),[e.errorMessage||e.checkboxGroupErrorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")]))},[C(e.$slots,"default")],2)],2),b(a,{"error-message":e.errorMessage},null,8,["error-message"])],2)}var f=_(de,[["render",te]]);f.install=function(e){e.component(f.name,f)};export{f as C,be as u};
