var Y=Object.defineProperty;var z=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var E=(e,n,t)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,u=(e,n)=>{for(var t in n||(n={}))J.call(n,t)&&E(e,t,n[t]);if(z)for(var t of z(n))R.call(n,t)&&E(e,t,n[t]);return e};import{d as T,r as Z,b as _,y as A,x as Q,e as g,w as W,v as X,o as v,c as ee,a as S,p as j,G as y,l as h,h as N,n as V,m as L,t as B,i as b,j as C,H as w,T as ne,I as te,q as O,J as ae,K as oe}from"./vendor.efca09d3.js";import{p as P,L as se}from"./index.167add38.js";import{I as ie}from"./index.f0ba8e12.js";import{u as re}from"./zIndex.2548bfbd.js";import{p as q,u as le,m as ce}from"./components.8013e964.js";import{_ as F}from"./elevation.f7de2a7a.js";import{c as de}from"./index.45528475.js";import{e as ue,c as fe,i as pe,t as U}from"./shared.506a394a.js";import{u as me}from"./lock.363e6814.js";function ve(e){return["top","center","bottom"].includes(e)}function ye(e){return $.includes(e)}const G={type:{type:String,validator:ye},position:{type:String,default:"top",validator:ve},content:{type:String},contentClass:{type:String},duration:{type:Number,default:3e3},vertical:{type:Boolean,default:!1},loadingType:q(P,"type"),loadingSize:q(P,"size"),lockScroll:{type:Boolean,default:!1},show:{type:Boolean,default:!1},teleport:{type:String,default:"body"},forbidClick:{type:Boolean,default:!1},onOpen:{type:Function,default:()=>{}},onOpened:{type:Function,default:()=>{}},onClose:{type:Function,default:()=>{}},onClosed:{type:Function,default:()=>{}},"onUpdate:show":{type:Function},_update:{type:String}};const be={success:"checkbox-marked-circle",warning:"warning",info:"information",error:"error",loading:""},ke=T({name:"VarSnackbarCore",components:{VarLoading:se,VarIcon:ie},props:G,setup(e){const n=Z(null),{zIndex:t}=re(()=>e.show,1);me(e,"show","lockScroll");const a=_(()=>{const{position:o,vertical:c,type:d}=e,x=`var-snackbar__wrapper var-snackbar__wrapper-${o} var-elevation--4`,H=c?" var-snackbar__vertical":"",K=d&&$.includes(d)?` var-snackbar__wrapper-${d}`:"";return`${x}${H}${K}`}),s=_(()=>e.type==="loading"||e.forbidClick),i=_(()=>e.type?be[e.type]:""),r=()=>{n.value=setTimeout(()=>{var o;e.type!=="loading"&&((o=e["onUpdate:show"])==null||o.call(e,!1))},e.duration)};return A(()=>e.show,o=>{var c,d;o?((c=e.onOpen)==null||c.call(e),r()):o===!1&&(clearTimeout(n.value),(d=e.onClose)==null||d.call(e))}),A(()=>e._update,()=>{clearTimeout(n.value),r()}),Q(()=>{var o;e.show&&((o=e.onOpen)==null||o.call(e),r())}),{zIndex:t,snackbarClass:a,iconName:i,isForbidClick:s}}}),_e={class:"var-snackbar__action"};function ge(e,n,t,a,s,i){const r=g("var-icon"),o=g("var-loading");return W((v(),ee("div",{class:"var-snackbar",style:V({pointerEvents:e.isForbidClick?"auto":"none",zIndex:e.zIndex})},[S("div",{class:j(e.snackbarClass),style:V({zIndex:e.zIndex})},[S("div",{class:j(["var-snackbar__content",[e.contentClass]])},[y(e.$slots,"default",{},()=>[L(B(e.content),1)])],2),S("div",_e,[e.iconName?(v(),h(r,{key:0,name:e.iconName},null,8,["name"])):N("v-if",!0),e.type==="loading"?(v(),h(o,{key:1,type:e.loadingType,size:e.loadingSize},null,8,["type","size"])):N("v-if",!0),y(e.$slots,"action")])],6)],4)),[[X,e.show]])}var D=F(ke,[["render",ge]]);const Se=T({name:"VarSnackbar",components:{VarSnackbarCore:D},props:G,setup(){const{disabled:e}=le();return{disabled:e}}});function he(e,n,t,a,s,i){const r=g("var-snackbar-core");return v(),h(te,{to:e.teleport,disabled:e.disabled},[b(ne,{name:"var-snackbar-fade",onAfterEnter:e.onOpened,onAfterLeave:e.onClosed},{default:C(()=>[b(r,w(e.$props,{class:"var-snackbar-transition"}),{action:C(()=>[y(e.$slots,"action")]),default:C(()=>[y(e.$slots,"default",{},()=>[L(B(e.content),1)])]),_:3},16)]),_:3},8,["onAfterEnter","onAfterLeave"])],8,["to","disabled"])}var f=F(Se,[["render",he]]);function Ce(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ae(e)}const $=["loading","success","warning","info","error"];let M=0,I=!1,k,p=!1,l=O([]);const we={type:void 0,content:"",position:"top",duration:3e3,vertical:!1,contentClass:void 0,loadingType:"circle",loadingSize:"normal",lockScroll:!1,teleport:"body",forbidClick:!1,onOpen:()=>{},onOpened:()=>{},onClose:()=>{},onClosed:()=>{}},Oe={name:"var-snackbar-fade",tag:"div",class:"var-transition-group"},$e={setup(){return()=>{const e=l.map(({id:t,reactiveSnackOptions:a,_update:s})=>{const i=document.querySelector(".var-transition-group");a.forbidClick||a.type==="loading"?i.classList.add("var-pointer-auto"):i.classList.remove("var-pointer-auto"),p&&(a.position="top");const o=u({position:p?"relative":"absolute"},Ae(a.position));return b(D,w(a,{key:t,style:o,"data-id":t,_update:s,show:a.show,"onUpdate:show":c=>a.show=c}),null)}),n=de.zIndex;return b(oe,w(Oe,{style:{zIndex:n},onAfterEnter:Ie,onAfterLeave:ze}),Ce(e)?e:{default:()=>[e]})}}},m=function(e){const n=fe(e)||pe(e)?{content:String(e)}:e,t=O(u(u({},we),n));t.show=!0,I||(I=!0,k=ce($e).unmountInstance);const{length:a}=l,s={id:M++,reactiveSnackOptions:t};if(a===0||p)Ee(s);else{const i=`update-${M}`;Te(t,i)}return{clear(){!p&&l.length?l[0].reactiveSnackOptions.show=!1:t.show=!1}}};$.forEach(e=>{m[e]=n=>(ue(n)?n.type=e:n={content:n,type:e},m(n))});m.install=function(e){e.component(f.name,f)};m.allowMultiple=function(e=!1){e!==p&&(l.forEach(n=>{n.reactiveSnackOptions.show=!1}),p=e)};m.clear=function(){l.forEach(e=>{e.reactiveSnackOptions.show=!1})};m.Component=f;function Ie(e){var a,s;const n=e.getAttribute("data-id"),t=l.find(i=>i.id===U(n));t&&((s=(a=t.reactiveSnackOptions).onOpened)==null||s.call(a))}function ze(e){var s,i;e.parentElement&&e.parentElement.classList.remove("var-pointer-auto");const n=e.getAttribute("data-id"),t=l.find(r=>r.id===U(n));t&&(t.animationEnd=!0,(i=(s=t.reactiveSnackOptions).onClosed)==null||i.call(s)),l.every(r=>r.animationEnd)&&(k==null||k(),l=O([]),I=!1)}function Ee(e){l.push(e)}function Te(e,n){const[t]=l;t.reactiveSnackOptions=u(u({},t.reactiveSnackOptions),e),t._update=n}function Ae(e="top"){return e==="bottom"?{[e]:"5%"}:{top:e==="top"?"5%":"45%"}}f.install=function(e){e.component(f.name,f)};export{m as S};
