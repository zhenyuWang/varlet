import{F as G,u as j}from"./provide.914447fc.js";import{I as q}from"./index.6428d33d.js";import{b as H,d,f as h,c as J}from"./components.57927f97.js";import{_ as K}from"./elevation.229458c1.js";import{d as L,r as F,A as O,b as Q,e as D,o as u,c as y,a as t,p as r,G as $,h as B,n as p,t as X,i as Y,z as Z,l as x}from"./vendor.49f89f0d.js";function _(e){return["text","password","number"].includes(e)}const ee={modelValue:{type:String},type:{type:String,default:"text",validator:_},textarea:{type:Boolean,default:!1},rows:{type:[String,Number],default:8},placeholder:{type:String},line:{type:Boolean,default:!0},hint:{type:Boolean,default:!0},textColor:{type:String},focusColor:{type:String},blurColor:{type:String},maxlength:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},resize:{type:Boolean,default:!1},validateTrigger:{type:Array,default:()=>["onInput","onClear"]},rules:{type:Array},onFocus:{type:Function},onBlur:{type:Function},onClick:{type:Function},onClear:{type:Function},onInput:{type:Function},onChange:{type:Function},"onUpdate:modelValue":{type:Function}};const{n:V,classes:ne}=J("input"),le=L({name:"VarInput",components:{VarIcon:q,VarFormDetails:G},props:ee,setup(e){const l=F(`var-input-${O().uid}`),f=F(null),m=F(!1),I=Q(()=>{const{maxlength:n,modelValue:s}=e;return n?h(s)?`0 / ${n}`:`${String(s).length}/${n}`:""}),{bindForm:M,form:o}=j(),{errorMessage:v,validateWithTrigger:a,validate:z,resetValidation:b}=H(),i=n=>{Z(()=>{const{validateTrigger:s,rules:g,modelValue:C}=e;a(s,n,g,C)})},T=()=>{const{hint:n,modelValue:s}=e;if(!n&&!h(s))return V("--placeholder-hidden");if(n&&(!h(s)||m.value))return V("--placeholder-hint")},N=n=>{m.value=!0,d(e.onFocus,n),i("onFocus")},P=n=>{m.value=!1,d(e.onBlur,n),i("onBlur")},U=n=>{const{value:s}=n.target;d(e["onUpdate:modelValue"],s),d(e.onInput,s,n),i("onInput")},A=n=>{const{value:s}=n.target;d(e.onChange,s,n),i("onChange")},E=()=>{const{disabled:n,readonly:s,clearable:g,onClear:C}=e;(o==null?void 0:o.disabled.value)||(o==null?void 0:o.readonly.value)||n||s||!g||(d(e["onUpdate:modelValue"],""),d(C,""),i("onClear"))},R=n=>{const{disabled:s,onClick:g}=e;(o==null?void 0:o.disabled.value)||s||(d(g,n),i("onClick"))},S=()=>{d(e["onUpdate:modelValue"],""),b()},w=()=>z(e.rules,e.modelValue),W=()=>{f.value.focus()},c=()=>{f.value.blur()};return d(M,{reset:S,validate:w,resetValidation:b}),{el:f,id:l,isFocus:m,errorMessage:v,maxlengthText:I,formDisabled:o==null?void 0:o.disabled,formReadonly:o==null?void 0:o.readonly,n:V,classes:ne,call:d,isEmpty:h,computePlaceholderState:T,handleFocus:N,handleBlur:P,handleInput:U,handleChange:A,handleClear:E,handleClick:R,validate:w,resetValidation:b,reset:S,focus:W,blur:c}}}),ae=["id","disabled","type","value","maxlength","rows"],oe=["id","disabled","type","value","maxlength"],se=["for"];function re(e,l,f,m,I,M){const o=D("var-icon"),v=D("var-form-details");return u(),y("div",{class:r(e.classes(e.n(),"var--box",[e.disabled,e.n("--disabled")])),onClick:l[8]||(l[8]=(...a)=>e.handleClick&&e.handleClick(...a))},[t("div",{class:r(e.classes(e.n("controller"),[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.formDisabled||e.disabled,e.n("--disabled")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor})},[t("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[$(e.$slots,"prepend-icon")],2),t("div",{class:r(e.classes(e.n("wrap"),[!e.hint,e.n("--non-hint")]))},[e.type==="password"?(u(),y("input",{key:0,class:r(e.n("autocomplete"))},null,2)):B("v-if",!0),e.textarea?(u(),y("textarea",{key:1,class:r(e.classes(e.n("input"),e.n("--textarea"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,rows:e.rows,style:p({color:e.textColor,caretColor:e.errorMessage?null:e.focusColor,resize:e.resize?"vertical":"none"}),onFocus:l[0]||(l[0]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:l[1]||(l[1]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:l[2]||(l[2]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:l[3]||(l[3]=(...a)=>e.handleChange&&e.handleChange(...a))},`
        `,46,ae)):(u(),y("input",{key:2,class:r(e.classes(e.n("input"),[e.formDisabled||e.disabled,e.n("--disabled")],[e.errorMessage,e.n("--caret-error")])),ref:"el",autocomplete:"new-password",id:e.id,disabled:e.formDisabled||e.disabled||e.formReadonly||e.readonly,type:e.type,value:e.modelValue,maxlength:e.maxlength,style:p({color:e.textColor,caretColor:e.errorMessage?null:e.focusColor}),onFocus:l[4]||(l[4]=(...a)=>e.handleFocus&&e.handleFocus(...a)),onBlur:l[5]||(l[5]=(...a)=>e.handleBlur&&e.handleBlur(...a)),onInput:l[6]||(l[6]=(...a)=>e.handleInput&&e.handleInput(...a)),onChange:l[7]||(l[7]=(...a)=>e.handleChange&&e.handleChange(...a))},null,46,oe)),t("label",{class:r(e.classes("var--ellipsis",[e.isFocus,e.n("--focus")],[e.errorMessage,e.n("--error")],[e.textarea,e.n("textarea-placeholder"),e.n("placeholder")],e.computePlaceholderState(),[!e.hint,e.n("--placeholder-non-hint")])),style:p({color:e.errorMessage?void 0:e.isFocus?e.focusColor:e.blurColor}),for:e.id},X(e.placeholder),15,se)],2),t("div",{class:r(e.classes(e.n("icon"),[!e.hint,e.n("--non-hint")]))},[$(e.$slots,"append-icon",{},()=>[e.clearable&&!e.isEmpty(e.modelValue)?(u(),x(o,{key:0,class:r(e.n("clear-icon")),"var-input-cover":"",name:"close-circle",size:"14px",onClick:e.handleClear},null,8,["class","onClick"])):B("v-if",!0)])],2)],6),e.line?(u(),y("div",{key:0,class:r(e.classes(e.n("line"),[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.blurColor})},[t("div",{class:r(e.classes(e.n("dot"),[e.isFocus,e.n("--spread")],[e.formDisabled||e.disabled,e.n("--line-disabled")],[e.errorMessage,e.n("--line-error")])),style:p({background:e.errorMessage?void 0:e.focusColor})},null,6)],6)):B("v-if",!0),Y(v,{"error-message":e.errorMessage,"maxlength-text":e.maxlengthText},null,8,["error-message","maxlength-text"])],2)}var k=K(le,[["render",re]]);k.install=function(e){e.component(k.name,k)};export{k as I};
