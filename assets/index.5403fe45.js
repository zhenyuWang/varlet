import{I as $}from"./index.e30cf35b.js";import{c as P,f as L}from"./elements.b75de382.js";import{c as M,t as y}from"./components.5cba9644.js";import{_ as R}from"./elevation.4d11ec3f.js";import{d as A,r as u,b as g,y as F,x as w,e as _,o as h,c as D,a as O,i as U,p as S,n as Y,G as z,Y as j,l as T,j as C,k as G,m as X,t as q,F as H}from"./vendor.49f89f0d.js";import{C as J}from"./index.7467f526.js";import{d as K}from"./index.079ade67.js";import{a as Q}from"./utils.3a4595f4.js";const W={modelValue:{type:Boolean},disabled:{type:Boolean,default:!1},animationDuration:{type:[Number,String],default:300},successDuration:{type:[Number,String],default:2e3},bgColor:{type:String},successBgColor:{type:String},color:{type:String},successColor:{type:String},onRefresh:{type:Function},"onUpdate:modelValue":{type:Function}};const{n:Z,classes:x}=M("pull-refresh"),m=100,f=-50;let N;const ee=A({name:"VarPullRefresh",components:{VarIcon:$},props:W,setup(e){const o=u(null),c=u(0),a=u(f),l=u("arrow-down"),n=u("default"),r=u(!1),t=g(()=>n.value!=="loading"&&n.value!=="success"&&!e.disabled),i=g(()=>({transform:`translate3d(0px, ${a.value}px, 0px) translate(-50%, 0)`,transition:r.value?`transform ${e.animationDuration}ms`:void 0,background:e.successBgColor||e.bgColor,color:e.successColor||e.color})),v=g(()=>n.value==="success"),E=s=>{!t.value||(n.value="pulling",c.value=s.touches[0].clientY)},k=s=>{const d=L(N);if(d>0||!t.value)return;d===0&&a.value>f&&s.cancelable&&s.preventDefault();const b=(s.touches[0].clientY-c.value)/2+f;a.value=b>=m?m:b,l.value=a.value>=m*.2?"refresh":"arrow-down"},I=()=>{var s,d;!t.value||(r.value=!0,a.value>=m*.2?(n.value="loading",a.value=m*.3,(s=e["onUpdate:modelValue"])==null||s.call(e,!0),(d=e.onRefresh)==null||d.call(e)):(n.value="loosing",l.value="arrow-down",a.value=f,setTimeout(()=>{r.value=!1},y(e.animationDuration))))},B=()=>{setTimeout(()=>{n.value="default",l.value="arrow-down",r.value=!1},y(e.animationDuration))};return F(()=>e.modelValue,s=>{s===!1&&(r.value=!0,n.value="success",l.value="checkbox-marked-circle",setTimeout(()=>{a.value=f,B()},y(e.successDuration)))}),w(()=>{N=P(o.value)}),{n:Z,classes:x,refreshStatus:n,freshNode:o,touchStart:E,touchMove:k,touchEnd:I,iconName:l,controlStyle:i,isSuccess:v}}});function oe(e,o,c,a,l,n){const r=_("var-icon");return h(),D("div",{ref:"freshNode",class:S(e.n()),onTouchstart:o[0]||(o[0]=(...t)=>e.touchStart&&e.touchStart(...t)),onTouchmove:o[1]||(o[1]=(...t)=>e.touchMove&&e.touchMove(...t)),onTouchend:o[2]||(o[2]=(...t)=>e.touchEnd&&e.touchEnd(...t)),onTouchcancel:o[3]||(o[3]=(...t)=>e.touchEnd&&e.touchEnd(...t))},[O("div",{class:S(e.classes(e.n("control"),"var-elevation--2",[e.isSuccess,e.n("control-success")])),style:Y(e.controlStyle)},[U(r,{name:e.iconName,transition:200,class:S(e.classes(e.n("icon"),[e.refreshStatus==="loading",e.n("animation")])),"var-pull-refresh-cover":""},null,8,["name","class"])],6),z(e.$slots,"default")],34)}var p=R(ee,[["render",oe]]);p.install=function(e){e.component(p.name,p)};const V=Array(10).fill("List Item"),ae=Array(10).fill("This is new List Item"),te={name:"PullRefreshExample",components:{VarPullRefresh:p,VarCell:J},setup(){const e=u(!1),o=u(V),c=()=>{setTimeout(()=>{o.value=o.value[0]==="List Item"?ae:V,e.value=!1},2e3)},a=l=>{l.preventDefault()};return w(()=>{document.body.addEventListener("touchmove",a,{passive:!1})}),j(()=>{document.body.removeEventListener("touchmove",a)}),Q(K),{refresh:c,isRefresh:e,data:o}}};function ne(e,o,c,a,l,n){const r=_("var-cell"),t=_("var-pull-refresh");return h(),T(t,{onRefresh:a.refresh,modelValue:a.isRefresh,"onUpdate:modelValue":o[0]||(o[0]=i=>a.isRefresh=i),"success-duration":"2000"},{default:C(()=>[(h(!0),D(H,null,G(a.data,(i,v)=>(h(),T(r,{key:v,border:""},{default:C(()=>[X(q(i+" "+(v+1)),1)]),_:2},1024))),128))]),_:1},8,["onRefresh","modelValue"])}var fe=R(te,[["render",ne],["__scopeId","data-v-5ca1ba7a"]]);export{fe as default};
