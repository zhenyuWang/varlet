var re=Object.defineProperty;var X=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var H=(e,u,n)=>u in e?re(e,u,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[u]=n,q=(e,u)=>{for(var n in u||(u={}))ne.call(u,n)&&H(e,n,u[n]);if(X)for(var n of X(u))ue.call(u,n)&&H(e,n,u[n]);return e};import{a as oe}from"./components.3670f0ad.js";import{F as se,u as ie}from"./provide.964d570d.js";import{a as de}from"./elements.92736b4e.js";import{t as f,d,i as ce}from"./shared.506a394a.js";import{_ as ve}from"./elevation.85e837d8.js";import{d as me,r as $,q as he,b as y,y as G,x as be,e as fe,o as w,c as F,a as v,n as V,F as Ve,k as ge,G as Se,p as L,i as ye,z as ke,t as ze}from"./vendor.6bd64832.js";function Te(e){return["always","normal","never"].includes(e)}const Ne={modelValue:{type:[Number,Array],default:0},step:{type:[Number,String],default:1},range:{type:Boolean,default:!1},labelVisible:{type:String,default:"normal",validator:Te},activeColor:{type:String},trackColor:{type:String},thumbColor:{type:String},labelColor:{type:String},labelTextColor:{type:String},trackHeight:{type:[String,Number]},thumbSize:{type:[String,Number]},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},rules:{type:Array},onChange:{type:Function},onStart:{type:Function},onEnd:{type:Function},"onUpdate:modelValue":{type:Function}};var j=(e=>(e.First="1",e.Second="2",e))(j||{});const Ce=me({name:"VarSlider",components:{VarFormDetails:se},props:Ne,setup(e){const{bindForm:u,form:n}=ie(),{errorMessage:P,validateWithTrigger:_,validate:M,resetValidation:k}=oe(),o=()=>M(e.rules,e.modelValue),c=()=>({startPosition:0,currentLeft:0,active:!1,percentValue:0}),J=()=>ke(()=>_(["onChange"],"onChange",e.rules,e.modelValue)),N=$(null),m=$(0),z=$(!1),r=he({["1"]:c(),["2"]:c()}),h=y(()=>m.value/100*f(e.step)),K=y(()=>{let t=[{value:e.modelValue,enumValue:"1"}];return e.range&&d(e.modelValue)&&(t=[{value:e.modelValue[0],enumValue:"1"},{value:e.modelValue[1],enumValue:"2"}]),t}),O=t=>{let a;return e.thumbSize!==void 0&&(a=r[t.enumValue].active?`${3*f(e.thumbSize)}px`:"0px"),{height:a,width:a}},Q=t=>e.labelVisible==="always"?!0:e.labelVisible==="never"?!1:r[t].active,Y=y(()=>{const{activeColor:t,range:a,modelValue:l}=e,s=a&&d(l)?Math.abs(l[0]-l[1]):l,i=a&&d(l)?Math.min(l[0],l[1]):0;return{width:`${s}%`,left:`${i}%`,background:t}}),g=y(()=>e.disabled||(n==null?void 0:n.disabled.value)),T=y(()=>e.readonly||(n==null?void 0:n.readonly.value)),B=(t,a)=>{var R;let l=[];const{step:s,range:i,modelValue:b,onChange:C}=e,I=f(s),S=Math.round(t/h.value)*I,le=r[a].percentValue;if(r[a].percentValue=S/I,i&&d(b)&&(l=a==="1"?[S,b[1]]:[b[0],S]),le!==S){const U=i?l:S;C==null||C(U),(R=e["onUpdate:modelValue"])==null||R.call(e,U),J()}},Z=t=>{if(!e.range)return"1";const a=r["1"].percentValue*h.value,l=r["2"].percentValue*h.value,s=Math.abs(t-a),i=Math.abs(t-l);return s<=i?"1":"2"},x=(t,a)=>{var l;m.value||(m.value=N.value.offsetWidth),!(g.value||T.value)&&((l=e.onStart)==null||l.call(e),z.value=!0,r[a].startPosition=t.touches[0].clientX)},ee=(t,a)=>{if(g.value||T.value||!z.value)return;let l=t.touches[0].clientX-r[a].startPosition+r[a].currentLeft;r[a].active=!0,l<=0?l=0:l>=m.value&&(l=m.value),B(l,a)},W=t=>{const{range:a,modelValue:l,onEnd:s}=e;if(g.value||T.value)return;let i=[];r[t].currentLeft=r[t].percentValue*h.value,r[t].active=!1;const b=r[t].percentValue;a&&d(l)&&(i=t==="1"?[b,l[1]]:[l[0],b]),s==null||s(a?i:b),z.value=!1},te=t=>{if(g.value||T.value||t.target.closest(".var-slider__thumb"))return;const a=t.clientX-de(t.currentTarget),l=Z(a);B(a,l),W(l)},A=()=>{const t=f(e.step);return isNaN(t)?(console.warn('[Varlet] Slider: type of prop "step" should be Number'),!1):t<1||t>100?(console.warn('[Varlet] Slider: "step" should be >= 0 and <= 100'),!1):parseInt(`${e.step}`,10)!==t?(console.warn('[Varlet] Slider: "step" should be an Integer'),!1):!0},p=()=>{const{range:t,modelValue:a}=e;return t&&!d(a)?(console.error('[Varlet] Slider: "modelValue" should be an Array'),!1):!t&&d(a)?(console.error('[Varlet] Slider: "modelValue" should be a Number'),!1):t&&d(a)&&a.length<2?(console.error('[Varlet] Slider: "modelValue" should have two value'),!1):!0},E=(t=e.modelValue,a=f(e.step))=>{e.range&&d(t)?(r["1"].percentValue=t[0]/a,r["1"].currentLeft=r["1"].percentValue*h.value,r["2"].percentValue=t[1]/a,r["2"].currentLeft=r["2"].percentValue*h.value):ce(t)&&(r["1"].currentLeft=t/a*h.value)};G([()=>e.modelValue,()=>e.step],([t,a])=>{!A()||!p()||z.value||E(t,f(a))}),G(m,()=>E()),be(()=>{!A()||!p()||(m.value=N.value.offsetWidth)});const ae={reset:()=>{var a;const t=e.range?[0,0]:0;(a=e["onUpdate:modelValue"])==null||a.call(e,t),k()},validate:o,resetValidation:k};return u==null||u(ae),{Thumbs:j,sliderEl:N,getFillStyle:Y,isDisabled:g,errorMessage:P,thumbsProps:r,thumbList:K,toNumber:f,getRippleSize:O,showLabel:Q,start:x,move:ee,end:W,click:te}}}),$e={class:"var-slider"},we={class:"var-slider__track"},Fe=["onTouchstart","onTouchmove","onTouchend","onTouchcancel"];function Le(e,u,n,P,_,M){const k=fe("var-form-details");return w(),F("div",$e,[v("div",{class:L(["var-slider-block",[e.isDisabled?"var-slider__disable":null,e.errorMessage?"var-slider__error":null]]),style:V({height:e.thumbSize===void 0?e.thumbSize:`${3*e.toNumber(e.thumbSize)}px`,margin:e.thumbSize===void 0?e.thumbSize:`0 ${e.toNumber(e.thumbSize)/2}px`}),ref:"sliderEl",onClick:u[0]||(u[0]=(...o)=>e.click&&e.click(...o))},[v("div",we,[v("div",{class:"var-slider__track-background",style:V({background:e.trackColor,height:e.trackHeight+"px"})},null,4),v("div",{class:"var-slider__track-fill",style:V(e.getFillStyle)},null,4)]),(w(!0),F(Ve,null,ge(e.thumbList,o=>(w(),F("div",{class:"var-slider__thumb",key:o.enumValue,style:V({left:`${o.value}%`,zIndex:e.thumbsProps[o.enumValue].active?1:void 0}),onTouchstart:c=>e.start(c,o.enumValue),onTouchmove:c=>e.move(c,o.enumValue),onTouchend:c=>e.end(o.enumValue),onTouchcancel:c=>e.end(o.enumValue)},[Se(e.$slots,"button",{currentValue:o.value},()=>[v("div",{class:"var-slider__thumb-block",style:V({background:e.thumbColor,height:e.thumbSize+"px",width:e.thumbSize+"px"})},null,4),v("div",{class:L(["var-slider__thumb-ripple",[e.thumbsProps[o.enumValue].active?"var-slider__thumb-ripple-active":null]]),style:V(q({background:e.thumbColor},e.getRippleSize(o)))},null,6),v("div",{class:L(["var-slider__thumb-label",[e.showLabel(o.enumValue)?"var-slider__thumb-label-active":null]]),style:V({background:e.labelColor,color:e.labelTextColor,height:e.thumbSize===void 0?e.thumbSize:`${2*e.toNumber(e.thumbSize)}px`,width:e.thumbSize===void 0?e.thumbSize:`${2*e.toNumber(e.thumbSize)}px`})},[v("span",null,ze(o.value),1)],6)])],44,Fe))),128))],6),ye(k,{"error-message":e.errorMessage,class:"var-slider__form","var-slider-cover":""},null,8,["error-message"])])}var D=ve(Ce,[["render",Le]]);D.install=function(e){e.component(D.name,D)};export{D as S};
